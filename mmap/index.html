<!DOCTYPE html>

<html>

        <head>
                <title>Dylan's Marauder's Map</title>
                <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
                <meta charset="utf-8" />
                <link rel="stylesheet" href="mmapStyle.css" />
                <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
                <script>
                        /* Map Data*/
                        var myLat = 0;
                        var myLng = 0;
                        var me = new google.maps.LatLng(myLat, myLng);
                        var map;
                        var mapOptions = {
                                zoom: 9,
                                center: me,
                                mapTypeId: google.maps.MapTypeId.ROADMAP
                        };
                        var marker;
                        var markerOptions = {
                                title: "KyleBroflovski",
                                position: me
                        };
                        var infoWindow = new google.maps.InfoWindow();

                        /* Specifically XMLHttpRequest Data */
                        var response = new XMLHttpRequest();
                        var url = "http://chickenofthesea.herokuapp.com/sendLocation";
                        var params = "login=KyleBroflovski&lat=MYLAT&lng=MYLNG";
                        console.log(params);
                        var userData;

                        function init() {
                                map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
                                console.log(params);
                                getMyLocation();
                        }

                        function getMyLocation() {
                                if (navigator.geolocation) {
                                        console.log("Before getcurposition");
                                        navigator.geolocation.getCurrentPosition(function(position) {
                                                console.log("During cur");
                                                myLat = position.coords.latitude;
                                                myLng = position.coords.longitude;
                                                /* Make a marker for my location */
                                                makeMarker();
                                                });
                                } else {
                                        alert("Geolocation is not supported on your web browser -- cannot display map");
                                }
                        }

                        function makeMarker() {
                                me = new google.maps.LatLng(myLat, myLng);
                                map.panTo(me);
                                markerOptions.position = me;

                                marker = new google.maps.Marker(markerOptions);
                                marker.setMap(map);
                        }
                        function makePost() { 
                                http.setRequestHeader('Content-type','application/x-www-form-urlencoded');

                        }
                </script>
        </head>


        <body onload=init()>
                <div id="map_canvas"></div>
        </body>

</html>